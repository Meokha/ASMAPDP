@model IEnumerable<SIMS.Models.StudentCourse>
@{
    ViewData["Title"] = "Gán khóa học cho sinh viên";
    var students = ViewBag.Students as List<SIMS.Models.Student>;
    var courses = ViewBag.Courses as List<SIMS.Models.Course>;
}
<div class="d-flex justify-content-between align-items-center mb-3">
    <h2 class="text-primary"><i class="bi bi-link-45deg"></i> Assign Courses to Students</h2>
</div>
<form method="post" action="@Url.Action("Assign")" class="row g-3 mb-4 align-items-end">
    <div class="col-md-5">
        <label class="form-label">Select Student</label>
        <select name="studentId" class="form-select" required>
            <option value="">Select Student</option>
            @if (students != null)
            {
                @foreach (var s in students)
                {
                    <option value="@s.Id">@s.FullName (@s.User?.Username)</option>
                }
            }
        </select>
    </div>
    <div class="col-md-5">
        <label class="form-label">Select Course</label>
        <select name="courseId" class="form-select" required>
            <option value="">Select Course</option>
            @if (courses != null)
            {
                @foreach (var c in courses)
                {
                    <option value="@c.Id">@c.Name</option>
                }
            }
        </select>
    </div>
    <div class="col-md-2">
        <button type="submit" class="btn btn-success w-100"><i class="bi bi-link-45deg"></i> Assign Course</button>
    </div>
</form>
<div class="table-responsive">
    <table class="table table-striped table-hover align-middle shadow-sm">
        <thead class="table-primary">
            <tr>
                <th><i class="bi bi-person"></i> Student</th>
                <th><i class="bi bi-journal"></i> Course</th>
                <th><i class="bi bi-gear"></i> Actions</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var sc in Model)
            {
                <tr>
                    <td>@sc.Student?.FullName (@sc.Student?.User?.Username)</td>
                    <td>@sc.Course?.Name</td>
                    <td>
                        <!-- DÒNG NÀY ĐÃ ĐƯỢC SỬA LỖI -->
                        <a asp-controller="StudentCourse" 
                           asp-action="Delete" 
                           asp-route-studentId="@sc.StudentId" 
                           asp-route-courseId="@sc.CourseId" 
                           class="btn btn-danger btn-sm">
                            <i class="bi bi-trash"></i> Delete
                        </a>
                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>